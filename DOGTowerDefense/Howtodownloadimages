// daejeon_dog(edited) 파일을 통해 강아지 이미지를 다운로드 받을 수 있는 python 코드입니다
// 아래 Python 스크립트를 실행하면 자동으로 다운로드됩니다.

import os
import requests
import json
import time

# JSON 저장 경로 
JSON_PATH = "daejeon_dogs_all_share.json"

# 이미지 저장 폴더
SAVE_DIR = "images"
os.makedirs(SAVE_DIR, exist_ok=True)

# JSON 읽기
with open(JSON_PATH, "r", encoding="utf-8") as f:
    data = json.load(f)

# 다운로드
for i, it in enumerate(data["items"], 1):
    url = it.get("imageUrl")
    fname = it.get("imageFileName") or f"img_{i}.jpg"

    if not url:
        print(f"[{i}] 이미지 URL 없음")
        continue

    try:
        resp = requests.get(url, timeout=10)
        if resp.status_code == 200:
            with open(os.path.join(SAVE_DIR, fname), "wb") as out:
                out.write(resp.content)
            print(f"[OK] {fname}")
        else:
            print(f"[FAIL] {fname} (HTTP {resp.status_code})")
    except Exception as e:
        print(f"[ERROR] {fname}: {e}")

    time.sleep(0.05)  
